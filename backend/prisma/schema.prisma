generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Partners {
  id          Int      @id @default(autoincrement())
  companyName String   @map("company_name") @unique
  image       String?
  createdAt   DateTime @map("created_at") @default(now())

  projects     Projects[]
  translations PartnerTranslations[]

  @@map("partners")
}

model Projects {
  id              Int       @id @default(autoincrement())
  projectName     String    @map("project_name") @unique
  projectLocation String    @map("project_location")
  image           String?
  gallery         String[]  @default([]) 
  priceFrom       Int?      @map("price_from")  
  deliveryDate    DateTime? @map("delivery_date")  
  numFloors       Int?      @map("num_floors")  
  numApartments   Int?      @map("num_apartments")  
  hotSale         Boolean   @map("hot_sale") @default(false)
  public          Boolean   @default(true)
  createdAt       DateTime  @map("created_at") @default(now())
  updatedAt       DateTime  @map("updated_at") @updatedAt @default(now())
  partnerId       Int       @map("partner_id")

  partner      Partners              @relation(fields: [partnerId], references: [id], onDelete: Cascade)
  translations ProjectTranslations[]
  apartments   Apartments[]

  @@map("projects")
}

model Apartments {
  id        Int      @id @default(autoincrement())
  room      Int
  area      Int
  images    String[]  
  createdAt DateTime @map("created_at") @default(now())
  projectId Int      @map("project_id")

  project      Projects                @relation(fields: [projectId], references: [id], onDelete: Cascade)
  translations ApartmentTranslations[]

  @@map("apartments")
}

model PartnerTranslations {
  id          Int    @id @default(autoincrement())
  partnerId   Int    @map("partner_id")
  language    String
  companyName String @map("company_name")

  partner Partners @relation(fields: [partnerId], references: [id], onDelete: Cascade)

  @@unique([partnerId, language])
  @@map("partner_translations")
}

model ProjectTranslations {
  id              Int    @id @default(autoincrement())
  projectId       Int    @map("project_id")
  language        String
  projectName     String @map("project_name")
  projectLocation String @map("project_location")

  project Projects @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@unique([projectId, language])
  @@map("project_translations")
}

model ApartmentTranslations {
  id          Int     @id @default(autoincrement())
  apartmentId Int     @map("apartment_id")
  language    String
  description String?

  apartment Apartments @relation(fields: [apartmentId], references: [id], onDelete: Cascade)

  @@unique([apartmentId, language])
  @@map("apartment_translations")
}


////////////////////////////////////////////////



enum PropertyType {
  APARTMENT
  VILLA
  COMMERCIAL
  LAND
  HOTEL
}

enum DealType {
  RENT
  SALE
  DAILY_RENT
}

enum PropertyStatus {
  OLD_BUILDING
  NEW_BUILDING
  UNDER_CONSTRUCTION
}

enum PropertyCondition {
  NEWLY_RENOVATED
  OLD_RENOVATED
  REPAIRING
}

enum HeatingType {
  CENTRAL_HEATING
  INDIVIDUAL
  GAS
  ELECTRIC
  NONE
}

enum ParkingType {
  PARKING_SPACE
  GARAGE
  OPEN_LOT
  NONE
}

enum HotWaterType {
  CENTRAL_HEATING
  BOILER
  SOLAR
  NONE
}

enum Occupancy {
  ONE
  TWO
  THREE
  FOUR
  FIVE
  SIX
  SEVEN
  EIGHT
  NINE
  TEN_PLUS
}

model Property {
  id              String        @id @default(cuid())
  externalId      String      @unique @map("external_id")
  propertyType    PropertyType
  status          PropertyStatus  
  address         String
  price           Int?
  createdAt       DateTime      @map("created_at") @default(now())
  updatedAt       DateTime      @map("updated_at") @updatedAt

  // Main details
  totalArea       Int?          @map("total_area")
  rooms           Int?
  bedrooms        Int?
  bathrooms       Int?
  floors          Int?
  floorsTotal     Int?          @map("floors_total")
  ceilingHeight   Float?        @map("ceiling_height")

  // Condition & Status
  condition       PropertyCondition?
  isNonStandard   Boolean       @map("is_non_standard") @default(false)

  // Occupancy
  occupancy       Occupancy?

  // Utilities
  heating         HeatingType?
  hotWater        HotWaterType? @map("hot_water")
  parking         ParkingType?

  // Booleans for amenities & features
  hasConditioner      Boolean @map("has_conditioner") @default(false)
  hasFurniture        Boolean @map("has_furniture") @default(false)
  hasBed              Boolean @map("has_bed") @default(false)
  hasSofa             Boolean @map("has_sofa") @default(false)
  hasTable            Boolean @map("has_table") @default(false)
  hasChairs           Boolean @map("has_chairs") @default(false)
  hasStove            Boolean @map("has_stove") @default(false)
  hasRefrigerator     Boolean @map("has_refrigerator") @default(false)
  hasOven             Boolean @map("has_oven") @default(false)
  hasWashingMachine   Boolean @map("has_washing_machine") @default(false)
  hasKitchenAppliances Boolean @map("has_kitchen_appliances") @default(false)
  hasBalcony          Boolean @map("has_balcony") @default(false)
  balconyArea         Float?  @map("balcony_area")
  hasNaturalGas       Boolean @map("has_natural_gas") @default(false)
  hasInternet         Boolean @map("has_internet") @default(false)
  hasTV               Boolean @map("has_tv") @default(false)
  hasSewerage         Boolean @map("has_sewerage") @default(false)
  isFenced            Boolean @map("is_fenced") @default(false)
  hasYardLighting     Boolean @map("has_yard_lighting") @default(false)
  hasGrill            Boolean @map("has_grill") @default(false)
  hasAlarm            Boolean @map("has_alarm") @default(false)
  hasVentilation      Boolean @map("has_ventilation") @default(false)
  hasWater            Boolean @map("has_water") @default(false)
  hasElectricity      Boolean @map("has_electricity") @default(false)
  hasGate             Boolean @map("has_gate") @default(false)

  translations     PropertyTranslations[]
  galleryImages   PropertyGalleryImage[]

  @@map("properties")
  @@index([propertyType])
  @@index([status])
}

model PropertyTranslations {
  id              Int     @id @default(autoincrement())
  propertyId      String  @map("property_id")
  property        Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)
  language        String
  title           String
  description     String?

  @@unique([propertyId, language])
  @@map("property_translations")
  @@index([propertyId])
}

model PropertyGalleryImage {
  id          Int     @id @default(autoincrement())
  propertyId  String  @map("property_id")
  property    Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)
  imageUrl    String  @map("image_url")
  order       Int     @default(0)
  createdAt   DateTime @map("created_at") @default(now())

  @@map("property_gallery_images")
  @@index([propertyId])
}



model HomepageSlide {
  id        Int      @id @default(autoincrement())
  image     String
  link      String?  
  order     Int      @default(0)
  isActive  Boolean  @map("is_active") @default(true)
  createdAt DateTime @map("created_at") @default(now())
  updatedAt DateTime @map("updated_at") @updatedAt

  translations HomepageSlideTranslations[]

  @@map("homepage_slides")
}

model HomepageSlideTranslations {
  id      Int    @id @default(autoincrement())
  slideId Int    @map("slide_id")
  language String
  title   String

  slide HomepageSlide @relation(fields: [slideId], references: [id], onDelete: Cascade)

  @@unique([slideId, language])
  @@map("homepage_slide_translations")
}


model MortgageRate {
  id            Int      @id @default(autoincrement())
  yearFrom      Int      @map("year_from") // e.g., 1
  yearTo        Int      @map("year_to")   // e.g., 10
  interestRate  Float    @map("interest_rate") // e.g., 10.0 (percentage)
  isActive      Boolean  @map("is_active") @default(true)
  createdAt     DateTime @map("created_at") @default(now())
  updatedAt     DateTime @map("updated_at") @updatedAt

  @@unique([yearFrom, yearTo])
  @@map("mortgage_rates")
}